{"version":3,"sources":["diplomaform/screens/home/core.cljs"],"mappings":"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","names":["diplomaform.screens.home.core/counter","cljs.core.atom","diplomaform.screens.home.core/id-atom","diplomaform.screens.home.core/text","counter","id","diplomaform.screens.home.core/radio","props","iter__4622__auto__","s__63794","cljs.core/LazySeq","temp__5753__auto__","cljs.core/seq","cljs.core/chunked-seq?","c__4620__auto__","size__4621__auto__","cljs.core/count","b__63796","cljs.core/chunk-buffer","i__63795","cljs.core/-nth","cljs.core/chunk-append","cljs.core/chunk-cons","cljs.core/chunk","iter__63793","cljs.core/chunk-rest","cljs.core/first","cljs.core/cons","cljs.core/rest","i","diplomaform.screens.home.core/checkbox","s__63798","b__63800","i__63799","iter__63797","diplomaform.screens.home.core/question","cljs.core._EQ_","diplomaform.screens.home.core/extract-text","js/document","diplomaform.screens.home.core/extract-single-choice","s__63802","b__63804","i__63803","iter__63801","diplomaform.screens.home.core/extract-multiple-choice","s__63806","b__63808","i__63807","iter__63805","diplomaform.screens.home.core/extract-value","cljs.core.assoc","G__63809","js/Error","diplomaform.screens.home.core/on-submit","event","data","re_frame.core.subscribe","results","cljs.core.map_indexed","cljs.core/deref","re-frame.core/dispatch-sync","cljs.pprint.pprint","diplomaform.screens.home.core/home-page","smth","re-frame.core/dispatch","p1__63810#","s__63812","b__63814","i__63813","iter__63811","cljs.core.swap_BANG_","cljs.core/inc","cljs.core/chunk-first"],"sourcesContent":["(ns diplomaform.screens.home.core\n  (:require\n   [re-frame.core :as re-frame]\n   [diplomaform.events :as events]\n   [diplomaform.subs :as subs]))\n\n;-----------------\n; question \n\n(def counter (atom 0))\n\n(def id-atom (atom {}))\n\n(defn text [counter]\n  (let [id (str \"input-\" counter)]\n    [:div {:class \"form-group\"}\n     [:input.input\n      {:type \"text\"\n       :class \"form-control\"\n       :id id\n       :name id}]]))\n\n(defn radio [counter props]\n  (for [i (:values props)\n        :let [id (str i counter)]]\n    [:div {:class \"form-check\"}\n     [:input\n      {:id id\n       :type \"radio\"\n       :class \"form-check-input choise\"\n       :name (str (:question props))}]\n     [:label {:class \"form-check-label\"}\n      (str i)]\n     [:br]]))\n\n\n(defn checkbox [counter props]\n  (for [i (:values props)\n        :let [id (str i counter)]]\n    [:div {:class \"form-check\"}\n     [:input\n      {:id id\n       :type \"checkbox\"\n       :class \"form-check-input choise\"}]\n     [:label {:class \"form-check-label\"} (str i)]\n     [:br]]))\n\n(defn question [props counter]\n  [:div {:class \"container\"}\n   [:h5 (str (:question props) (when (= (:required props) true) \" *\"))]\n   [:form\n    (when (= (:type props) \"free-text\") (text counter))\n    (when (= (:type props) (str \"single-choice\")) (radio counter props))\n    (when (= (:type props) (str \"multiple-choice\")) (checkbox counter props))]])\n\n\n;-----------------\n; questions form \n\n\n(defn extract-text [counter]\n  (.-value  (.getElementById js/document (str \"input-\" counter))))\n\n(defn extract-single-choice [props counter]\n  (for [i (:values props)\n        :let [id (str i counter)]]\n    {i (.-checked (.getElementById js/document id))})\n  )\n\n(defn extract-multiple-choice [props counter]\n  (for [i (:values props)\n        :let [id (str i counter)]]\n    {i (.-checked (.getElementById js/document id))}))\n\n;; {:question \"Do you like this survey?\"\n;;  :required true\n;;  :type \"single-choice\"\n;;  :values [\"Yes\" \"No\"]}\n(defn extract-value [props counter]\n  (assoc props :values\n         (case (:type props)\n           \"free-text\" (extract-text counter)\n           \"single-choice\" (extract-single-choice props counter)\n           \"multiple-choice\" (extract-multiple-choice props counter))))\n\n;; {:question \"Do you like this survey?\"\n;;  :required true\n;;  :type \"single-choice\"\n;;  :values [{\"Yes\": true} {\"No\": false}]}\n\n(defn on-submit [event]\n  (.preventDefault event)\n  (let [data (re-frame/subscribe [::subs/data])\n        results (map-indexed (fn [counter props]\n                               (extract-value props counter))\n                             (:questions @data))]\n    (re-frame/dispatch-sync [::events/post-results results])\n    ;; Update data with results (assoc into :answers key)\n    ;; Send that data via re-frame to server \n    (cljs.pprint/pprint @data)\n    (cljs.pprint/pprint results)))\n\n\n\n\n(defn home-page []\n  (let [data (re-frame/subscribe [::subs/data])\n        smth (re-frame/dispatch [::events/something])]\n    (fn []\n      [:form\n       {:on-submit #(on-submit %)}\n       [:div {:class \"container field\"}\n        [:div\n         [:div {:class \"d-flex justify-content-center\"}\n          [:h3 \"Answer, please :\"]]\n\n         (for [i (:questions @data)]\n           [question i (dec (swap! counter inc))])\n         [:button.button {:color \"btn btn-light button\"\n                          :type \"submit\"}\n          \"Submit\"]]]])))\n\n\n\n\n\n\n"]}